# Cartesi FHE demo

This repo is a demo of executing homomorphic cryptography on top the Cartesi virtual machine.

## Quickstart

To launch this stuff inside a Cartesi machine follow these steps:
1. Prepare development environment and place the RISC-V toolchain to the `/toolchain` directory.
2. Create build directory: `mkdir build && cd build`.
3. Build project using the provided toolchain file: `cmake -DCMAKE_TOOLCHAIN_FILE=../riscv.toolchain ..`.
4. Copy `string_cap_char_fhe_test` and `third-party/tfhe/src/libtfhe/libtfhe-nayuki-portable.so` to the machine.
5. Execute demo on the machine: `cartesi-machine --ram-length=1024Mi -- "LD_LIBRARY_PATH=/fhe /fhe/string_cap_char_fhe_test test"`.

## Notes

- `src/string_cap_char_tfhe.cc`, `include/string_cap_char_tfhe.h` and `include/string_cap_char_tfhe.types.h` were generated by the [Google FHE](https://github.com/google/fully-homomorphic-encryption). In this repo modified versions are used which are independent from the `Google Abseil` library. To generate these files you need to:
    1. clone the FHE repo;
    2. run `bazel build //transpiler/examples/string_cap_char:string_cap_char_tfhe_testbench`.
- `include/fhe_data.h` and `include/boolean_data.h` were taken from the [Google FHE](https://github.com/google/fully-homomorphic-encryption) and modified to make them independent from the `Google Abseil` library.
- the backend for homomorphic enctyprion used here is [TFHE](https://github.com/tfhe/tfhe) library. The build system of this library was slightly modified, the modified version is present in this repo.
